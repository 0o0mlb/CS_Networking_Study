> 목차

👉[7.2 와이파이 802:11 무선 랜](#72-와이파이-80211-무선-랜)　   
　   [7.2.1 CSMA/CA](#721-csmaca)　   　   
　   [7.2.2 802.11 WLAN 구조](#722-80211-wlan-구조)　     
　   
　   

## 7.2 와이파이 802.11 무선 랜

WiFi라고 더 잘 알려진 IEEE 802.11 무선 LAN은 우리 주변에서 자연스럽게 접할 수 있는 **중요한 네트워크 접속 기술**이다.　   
　   
IEEE 802.11 표준안에는 　   
802.11b, 802.11g, 802.11n, 802.11ac, 802.11ax, 802.11af, 802.11ah 등이 있다.　   
각 표준안에 따라 **최대 데이터 전송률, 전송 거리, 주파수 범위** 등이 다르다.　   
　   
2.4GHz 대역과 5GHz 대역 2가지를 사용하며,　   
표시된 전송률보다 환경적인 문제에 의해 주로 더 낮은 전송률을 경험하는 것이 현실이다. 　   
　   
위 모든 표준안은　   
**CSMA/CA(Collision Avoidance)** 방식을 사용한다. 　   
이는 CSMA, CSMA/CD와 비교할 필요가 있다.　   
　   
　   
### 7.2.1 CSMA/CA

> CSMA/CD(Collision Detection)

앞서 6단원에서 배운 내용이다.　   
CSMA 방식은, **브로드캐스트 채널**의 **다중 접속**에 이용한다. 　   
CSMA/CD와, CSMA/CA는 CSMA의 진화 버전이다.　   
브로드캐스트 채널은 하나의 링크(같은 대역폭)에 여러 개의 노드에서 패킷을 보내기 때문인데, 동시에 보내면 안 된다.　   
　   
따라서 　   
1. 노드는 패킷을 보낼 수 있는지 확인(수신지로 보내는 다른 노드가 있는 지 확인)　   
2. 동시에 물어보면 충돌 발생　   
3. 충돌 발생 시 잠시 전송을 중단 후, "충돌 발생 횟수"에 따라 "지연 시간"을 늘리는 등, 잠시 지연 후 다시 전송한다.　   
　   
　   
> CSMA/CA

위와 같은 상황이다. 여러 스테이션(AP같은)이 동시에 동일한 채널로 데이터 프레임을 전송한다면, **다중 접속 프로토콜**이 필요하다.　   
CSMA/CD와 CSMA/CA의 가장 큰 차이점은, "충돌 검출 vs 충돌 회피"이다. 　   
　   
유선과 다르게 무선 LAN에서는 CSMA/CA 방식을 사용한다.　   
그 이유는 7.1장에서 배운 것과 관련있다.　   
　   
1. 대부분의 무선 스테이션에서 수신 신호는 송신 신호보다 매우 약하다. 따라서, 송수신 신호 둘 다를 잘 감지하여 충돌을 검출하려는 **하드웨어**를 만드는 것은 비용적으로 무리가 된다.　   
2. 그런 하드웨어를 만들었다고 해도, 앞서 배운 "숨은 터미널 문제"와 "페이딩"때문에 무선 스테이션이 충돌을 검출하지 못할 가능성이 높다.　   

    
CSMA/CA은 충돌 검출을 하지 않는다.　   
따라서,　   
일단 스테이션이 프레임을 전송하기 시작하면 그 프레임은 모두 다 전송한다. 　   
이는 충돌이 일어나지 않는다는 것을 의미하지 않는다.　   
충돌이 분명히 일어나는 경우가 있지만, 그러한 경우를 최대한 피하도록 알고리즘을 짜는 것이다.　   
　   
**링크 계층 ACK**을 사용한다.　   
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/02d749d8-9fbe-4e74-a7e4-f9b73c856318)　   
1. 스테이션은 채널이 사용되지 않음을 감지하면 DIFS(Distributed Inter-frame Space)라는 짧은 시간을 기다린 후에, 프레임을 "전체" 전송한다. SIFS시간 동안 ACK를 기다린다.　   
2. 채널이 사용중이라면, 앞선 6단원에 배운 방식(랜덤 백오프 등)을 이용하여 일정 시간 기다린 뒤 다시 1번으로 돌아간다.　   
3. 잘 받았다는 의미로 ACK를 수신하면 상황이 종료된다.　   
4. ACK를 수신하지 못하면, 기다리는 시간을 증가시켜서 2번으로 돌아간다.　   
　   
　   
**CSMA/CD 다중 접속 프로토콜은 채널이 사용되지 않는 "유휴 상태"임을 감지하면 바로 전송을 시작한다.**　   
**하지만, CSMA/CA 방식은 DIFS같은 대기 시간을 가져 "전송을 지연"시킨다.**　   
=> 그 이유는, CSMA/CA 방식의 가장 큰 목표는 충돌을 회피하는 것이기 때문이다. 　   
CSMA/CD 방식은 충돌이 발생하면 즉시 전송을 멈춤으로 불필요한 전송을 최소화한다.　   
충돌 감지자체가 어려운 무선 방식에서는, 일단 전송하기 시작하면 더 전송해버리므로, 충돌을 최대한 회피해야 한다.　   
DIFS시간동안 다른 스테이션의 신호를 감지할 수 있다. 감지한 경우, 타이머를 중단시켜 다른 스테이션이 전송을 완료할 때까지 기다린다. 　   
　   
> 숨은 터미널 해결 방안 : RTS와 CTS

CSMA/CA에서 DIFS와 SIFS의 랜덤 백오프 대기 시간을 사용하지만, 　   
![image](https://github.com/inpink/CS_Networking_Study/assets/108166692/504e962b-fdfb-4cf0-8056-2bec25684788)　   
위 그림과 같이 숨은 터미널의 경우, H1와 H2는 서로를 인지하지 못한다.　   
　   
이 경우,　   
1. 짧은 RTS(Request to Send) 제어 프레임을 스테이션(AP)에게 보낸다. DATA프레임과 ACK 프레임을 받는데 필요한 전체 시간을 AP에게 알려준다.　   
  이 때, 무선 네트워크이므로 **이 또한 브로드캐스트이다.** 만약 영역 내에 다른 스테이션이 있다면,    　   
2. AP는 CTS(Clear to Send) 프레임을 1번의 송신 스테이션을 포함한 **영역 내의 모든 스테이션**에 전송한다.　   
   1번 송신 스테이션에게는 **허가**를 알려주고, 그 시간동안 AP를 예약하는 효과를 지닌다. 　   
　   
RTS/CTS를 교환함으로써 충돌을 감소시킬 수 있지만, 이로 인해 지연과 채널 자원의 낭비가 발생된다.　   
따라서 "긴 DATA 프레임"을 전송하기 위해 "채널을 예약"할 때만 한정적으로 사용한다. 　   
　   
　   
### 7.2.2 802.11 WLAN 구조

493p 그림 7.7을 참고하자.　   
　   
무선 랜 구조의 가장 기본적인 구성 단위는 **BSS(basic service set)** 이다. 　   
하나의 BSS는 주로 여러 개의 **무선 단말기, 하나의 기지국(AP)** 으로 구성된다.　   　   
또, BSS는 스위치/라우터를 통해 인터넷으로 연결되어야 한다.　   
　   
802.11 무선 기지국(AP 등)은 **6바이트 크기의 MAC 주소** 를 가진다. 　   
**MAC 주소는 각 스테이션의 어뎁터(802.11 네트워크 인터페이스 카드NIC) 펌웨어에 저장되어 있다.**　   
